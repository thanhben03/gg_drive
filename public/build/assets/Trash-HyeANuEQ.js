import{s as $,a as B,A as j}from"./AuthenticatedLayout-l7-ZxOOj.js";import{_ as A,h as F}from"./http-helper--CrT2N5H.js";import{_ as S}from"./Checkbox-4aAaSSK5.js";import{_ as M}from"./Modal-qVR1ryoo.js";import{_ as N}from"./SecondaryButton-yAsrplH_.js";import{D as q}from"./DangerButton-Xn3o4_BL.js";import{o as u,c as L,w as _,t as y,b as e,d as x,a as i,Q as I,T as D,j as m,f as h,F as w,h as O,p as T,k as E,u as P,Z as U,q as z,n as R,g as G}from"./app-ImTeHo3O.js";import"./ApplicationLogo-yTz1-3l3.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./TextInput-vBC3avoD.js";import"./PrimaryButton-firhvslF.js";const H={class:"p-6"},Q=e("h2",{class:"text-2xl mb-2 font-semibold"},"Please Confirm",-1),Z={class:"mt-6 flex justify-end"},V={__name:"ConfirmationDialog",props:{show:Boolean,message:String},emits:["cancel","confirm"],setup(c,{emit:l}){const t=l;return(r,s)=>(u(),L(M,{show:c.show,"max-width":"md"},{default:_(()=>[e("div",H,[Q,e("p",null,y(c.message),1),e("div",Z,[i(N,{onClick:s[0]||(s[0]=o=>t("cancel"))},{default:_(()=>[x("Cancel")]),_:1}),i(q,{class:"ml-3",onClick:s[1]||(s[1]=o=>t("confirm"))},{default:_(()=>[x(" Confirm ")]),_:1})])])]),_:1},8,["show"]))}},J=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})],-1),K={__name:"RestoreFilesButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["restore"],setup(c,{emit:l}){I();const t=D({all:null,ids:[],parent_id:null}),r=m(!1),s=c,o=l;function f(){if(!s.allSelected&&!s.selectedIds.length){$("Please select at least one file to restore");return}r.value=!0}function p(){r.value=!1}function v(){s.allSelected?t.all=!0:t.ids=s.selectedIds,t.post(route("file.restore"),{onSuccess:()=>{r.value=!1,o("restore"),B("Selected files have been restored")}})}return(b,g)=>(u(),h(w,null,[e("button",{onClick:f,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"},[J,x(" Restore ")]),i(V,{show:r.value,message:"Are you sure you want to restore selected files?",onCancel:p,onConfirm:v},null,8,["show"])],64))}},W=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),X={__name:"DeleteForeverButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["delete"],setup(c,{emit:l}){I();const t=D({all:null,ids:[],parent_id:null}),r=m(!1),s=c,o=l;function f(){if(!s.allSelected&&!s.selectedIds.length){$("Please select at least one file to delete");return}r.value=!0}function p(){r.value=!1}function v(){s.allSelected?(t.all=!0,t.ids=[]):t.ids=s.selectedIds,t.delete(route("file.deleteForever"),{onSuccess:()=>{r.value=!1,o("delete"),B("Selected files have been deleted forever")}})}return(b,g)=>(u(),h(w,null,[e("button",{onClick:f,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white mr-3"},[W,x(" Delete Forever ")]),i(V,{show:r.value,message:"Are you sure you want to delete selected files?",onCancel:p,onConfirm:v},null,8,["show"])],64))}},Y={class:"flex items-center justify-end p-1 mb-3"},ee={class:"flex-1 overflow-auto"},te={class:"min-w-full"},se={class:"bg-gray-100 border-b"},le={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},oe=e("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),ae=e("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),ne=["onClick"],re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},de={key:0,class:"py-8 text-center text-sm text-gray-400"},ke={__name:"Trash",props:{files:Object,folder:Object,ancestors:Object},setup(c){const l=m(!1),t=m({}),r=m(null),s=c,o=m({data:s.files.data,next:s.files.links.next}),f=O(()=>Object.entries(t.value).filter(a=>a[1]).map(a=>a[0]));function p(){o.value.next!==null&&F(o.value.next).then(a=>{o.value.data=[...o.value.data,...a.data],o.value.next=a.links.next})}function v(){o.value.data.forEach(a=>{t.value[a.id]=l.value})}function b(a){t.value[a.id]=!t.value[a.id],g(a)}function g(a){if(!t.value[a.id])l.value=!1;else{let d=!0;for(let n of o.value.data)if(!t.value[n.id]){d=!1;break}l.value=d}}function C(){l.value=!1,t.value={}}return T(()=>{o.value={data:s.files.data,next:s.files.links.next}}),E(()=>{new IntersectionObserver(d=>d.forEach(n=>n.isIntersecting&&p()),{rootMargin:"-250px 0px 0px 0px"}).observe(r.value)}),(a,d)=>(u(),h(w,null,[i(P(U),{title:"Trash"}),i(j,null,{default:_(()=>[e("nav",Y,[e("div",null,[i(X,{"all-selected":l.value,"selected-ids":f.value,onDelete:C},null,8,["all-selected","selected-ids"]),i(K,{"all-selected":l.value,"selected-ids":f.value,onRestore:C},null,8,["all-selected","selected-ids"])])]),e("div",ee,[e("table",te,[e("thead",se,[e("tr",null,[e("th",le,[i(S,{onChange:v,checked:l.value,"onUpdate:checked":d[0]||(d[0]=n=>l.value=n)},null,8,["checked"])]),oe,ae])]),e("tbody",null,[(u(!0),h(w,null,z(o.value.data,n=>(u(),h("tr",{key:n.id,onClick:k=>b(n),class:R(["border-b transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer",t.value[n.id]||l.value?"bg-blue-50":"bg-white"])},[e("td",re,[i(S,{onChange:k=>g(n),modelValue:t.value[n.id],"onUpdate:modelValue":k=>t.value[n.id]=k,checked:t.value[n.id]||l.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),e("td",ie,[i(A,{file:n},null,8,["file"]),x(" "+y(n.name),1)]),e("td",ce,y(n.path),1)],10,ne))),128))])]),o.value.data.length?G("",!0):(u(),h("div",de," There is no data in this folder ")),e("div",{ref_key:"loadMoreIntersect",ref:r},null,512)])]),_:1})],64))}};export{ke as default};
