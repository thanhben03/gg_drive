import{Q as p,k as c,o as h,c as u,w as m,d as w,b as i}from"./app-ImTeHo3O.js";import{P as _}from"./PrimaryButton-firhvslF.js";import{h as M}from"./http-helper--CrT2N5H.js";import{e as B,d as k}from"./AuthenticatedLayout-l7-ZxOOj.js";const g=i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1),A={__name:"DownloadFileButton",props:{all:{type:Boolean,required:!1,default:!1},ids:{type:Array,required:!1},sharedWithMe:!1,sharedByMe:!1},setup(f){const l=p(),e=f;function n(){var s,d;if(!e.all&&e.ids.length===0&&!file.id)return;const t=new URLSearchParams;if((s=l.props.folder)!=null&&s.id&&t.append("parent_id",(d=l.props.folder)==null?void 0:d.id),e.all)t.append("all",e.all?1:0);else for(let o of e.ids)t.append("ids[]",o);let r=route("file.download");e.sharedWithMe?r=route("file.downloadSharedWithMe"):e.sharedByMe&&(r=route("file.downloadSharedByMe")),M(r+"?"+t.toString()).then(o=>{if(console.log(o),!o.url)return;const a=document.createElement("a");a.download=o.filename,a.href=o.url,a.click()})}return c(()=>{B.on(k,n)}),(t,r)=>(h(),u(_,{onClick:n},{default:m(()=>[g,w(" Download ")]),_:1}))}};export{A as _};
